
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Starter Template for Bootstrap</title>

    <!-- Bootstrap core CSS -->
    <link href="css/bootstrap.css" rel="stylesheet">

    <!-- Add custom CSS here -->
    <link href="css/simple-sidebar.css" rel="stylesheet">
    <link href="font-awesome/css/font-awesome.min.css" rel="stylesheet">

                <script src="build/three.js"></script>

                <script src="js/loaders/ColladaLoader.js"></script>

                <script src="js/Detector.js"></script>
                <script src="js/libs/stats.min.js"></script>
                <script src="js/OrbitControls.js"></script>
                <script src="js/jquery.js"></script>
                    <style>
    .spinner {
      margin: 100px auto;
      width: 50px;
      height: 30px;
      text-align: center;
      font-size: 10px;
    }

    .spinner > div {
      background-color: #333;
      height: 100%;
      width: 6px;
      display: inline-block;
      
      -webkit-animation: stretchdelay 1.2s infinite ease-in-out;
      animation: stretchdelay 1.2s infinite ease-in-out;
    }

    .spinner .rect2 {
      -webkit-animation-delay: -1.1s;
      animation-delay: -1.1s;
    }

    .spinner .rect3 {
      -webkit-animation-delay: -1.0s;
      animation-delay: -1.0s;
    }

    .spinner .rect4 {
      -webkit-animation-delay: -0.9s;
      animation-delay: -0.9s;
    }

    .spinner .rect5 {
      -webkit-animation-delay: -0.8s;
      animation-delay: -0.8s;
    }

    @-webkit-keyframes stretchdelay {
      0%, 40%, 100% { -webkit-transform: scaleY(0.4) }  
      20% { -webkit-transform: scaleY(1.0) }
    }

    @keyframes stretchdelay {
      0%, 40%, 100% { 
        transform: scaleY(0.4);
        -webkit-transform: scaleY(0.4);
      } 20% {
        transform: scaleY(1.0);
        -webkit-transform: scaleY(1.0);
      }
    }
    </style>

  </head>

  <body>
  
    <div id="wrapper">
      
      <!-- Sidebar -->
      <div id="sidebar-wrapper">
        <ul class="sidebar-nav">
          <li class="sidebar-brand"><a href="#">Start Bootstrap</a></li>
          <li><a href="#">Dashboard</a></li>
          <li><a href="#">Shortcuts</a></li>
          <li><a href="#">Overview</a></li>
          <li><a href="#">Events</a></li>
          <li><a href="#">About</a></li>
          <li><a href="#">Services</a></li>
          <li><a href="#">Contact</a></li>
        </ul>
      </div>
          
      <!-- Page content -->
      <div id="page-content-wrapper">
        <div class="content-header">
          <h1>
            <a id="menu-toggle" href="#" class="btn btn-default"><i class="icon-reorder"></i></a>
            Simple Sidebar
          </h1>
        </div>
        <!-- Keep all page content within the page-content inset div! -->
        <div class="page-content inset">
          <div class="row">
            <div class="col-md-12" id="Foo">
              <div class="spinner" id="myspinner">
              <div class="rect1"></div>
              <div class="rect2"></div>
              <div class="rect3"></div>
              <div class="rect4"></div>
              <div class="rect5"></div>
            </div>
            <script>
                        var controls;
                        var theDiv, stats;

                        var camera, scene, renderer, objects;
                        var particleLight, pointLight;
                        var particleLight2, pointLight2;
                        var dae, skin; 
                        var x = 0;
                        var y = 75;
                        var z = 0;

                        var loader = new THREE.ColladaLoader();
                        loader.options.chhonvertUpAxis = true;
                        loader.load( './models/collada/brainmodel/Sacrificial.dae', function ( collada ) {

                                dae = collada.scene;
                                //skin = collada.skins[ 0 ];

                                dae.scale.x = dae.scale.y = 1;
                                dae.scale.z = 1;
                                dae.updateMatrix();
                                dae.position.x = 0;
                                dae.position.y = 0;
                                dae.position.z = 25;
                                init();
                                animate();
                                document.getElementById("myspinner").style.visibility="hidden";
                        } );

                        function init() {
                                //container = document.createElement( 'div' );
                                //var theDiv = document.getElementById("The iD");
                                //theDiv.appendChild(container);
                                //document.body.appendChild( container );
                                camera = new THREE.PerspectiveCamera( 45, window.innerWidth / window.innerHeight, 1, 2000 );
                                camera.position.set( 2, 2, 3 );



                                scene = new THREE.Scene();

                                        controls = new THREE.OrbitControls( camera );
                                controls.addEventListener( 'change', render );


                                // Grid

                                var size = 14, step = 1;

                                var geometry = new THREE.Geometry();
                                var material = new THREE.LineBasicMaterial( { color: 0x303030 } );

                                for ( var i = - size; i <= size; i += step ) {

                                        geometry.vertices.push( new THREE.Vector3( - size, - 0.04, i ) );
                                        geometry.vertices.push( new THREE.Vector3(   size, - 0.04, i ) );

                                        geometry.vertices.push( new THREE.Vector3( i, - 0.04, - size ) );
                                        geometry.vertices.push( new THREE.Vector3( i, - 0.04,   size ) );

                                }

                                var line = new THREE.Line( geometry, material, THREE.LinePieces );
                                scene.add( line );
 
                                // Add the COLLADA

                                scene.add( dae );


                                particleLight = new THREE.Mesh( new THREE.SphereGeometry( 0.1, 4, 4 ), new THREE.MeshBasicMaterial( { color: 0x00ffdd } ) );
                                scene.add( particleLight );
                                particleLight2 = new THREE.Mesh( new THREE.SphereGeometry( 0.1, 4, 4 ), new THREE.MeshBasicMaterial( { color: 0xff00dd } ) );
                                scene.add( particleLight2 );

                                // Lights

                                scene.add( new THREE.AmbientLight( 0x666666 ) );

                                var directionalLight = new THREE.DirectionalLight(/*Math.random() * 0xffffff*/0xeeeeee );
                                directionalLight.position.x = Math.random()*2 - 0.5;
                                directionalLight.position.y = Math.random()*2 - 0.5;
                                directionalLight.position.z = Math.random()*2 - 0.5;
                                directionalLight.position.normalize();
                                scene.add( directionalLight );

                                pointLight = new THREE.PointLight( 0x00ffdd, 1 );
                                pointLight.position = particleLight.position;
                                scene.add( pointLight );
                                
                                pointLight2 = new THREE.PointLight( 0xff00dd, 1 );
                                pointLight2.position = particleLight2.position;
                                scene.add( pointLight2 );

                                renderer = new THREE.WebGLRenderer();
                                renderer.setSize( window.innerWidth, window.innerHeight );
                                
                                var theDiv = document.getElementById("Foo");
                                //theDiv.appendChild(container);
                                //document.body.appendChild( container
                                theDiv.appendChild( renderer.domElement );
                                $( ".spinner" ).remove();

                                stats = new Stats();
                                stats.domElement.style.position = 'absolute';
                                stats.domElement.style.top = '0px';
                                theDiv.appendChild( stats.domElement );

                                var setMaterial = function( node ) {
                                  node.material = new THREE.MeshBasicMaterial({color: 0xff0000} );
                                  console.log(node);
                                  if (node.children) {
                                    for (var i=0, thelength=node.children.length; i < thelength ; i++ ) {
                                      setMaterial(node.children[i]);
                                    }
                                  }
                                }
                                setMaterial(dae);

//var setMaterial = function(node, material) {
//  node.material = material;
//  console.log(node);
//  if (node.children) {
//    for (var i = 0; i < node.children.length; i++) {
//      setMaterial(node.children[i], material);
//    }
//  }
//}
//                                setMaterial(dae, new THREE.MeshBasicMaterial({color: 0xff0000}));
                                //
                                
                                document.addEventListener( 'keydown', onDocumentKeyDown, false);
                                window.addEventListener( 'resize', onWindowResize, false );

                        }

                        function onWindowResize() {

                                camera.aspect = window.innerWidth / window.innerHeight;
                                camera.updateProjectionMatrix();

                                renderer.setSize( window.innerWidth, window.innerHeight );

                        }

                        
                        function onDocumentKeyDown(event) 
                        {
                                switch ( event.keyCode) 
                                {        
                                        case 68: x += 0.1; break ; //right
                                        case 65: x -= 0.1; break ; //left
                                        case 87: z += 0.1; break ; //left
                                        case 83: z -= 0.1; break ; //right
                                        //case 87: WaveLength+=0.1; break ; //w
                                        //case 83: WaveLength-=0.1; break ; //s
                                        //case 65: WaveLength+=0.1; break ; //a
                                        //case 68: WaveLength -=0.1; break ; //d
                                        //case 84: $("#Controls").slideToggle("normal"); 
                                                        //$("#Title_And_Instructions").fadeToggle("normal");
                                                        //break;
                                        
                                }
                        }

                        //

                        var t = 0;
                        var clock = new THREE.Clock();

                        function animate() {

                                var delta = clock.getDelta();


                                requestAnimationFrame( animate );

                                if ( t > 1 ) t = 0;

                                if ( skin ) {

                                        // guess this can be done smarter...

                                        // (Indeed, there are way more frames than needed and interpolation is not used at all
                                        //  could be something like - one morph per each skinning pose keyframe, or even less,
                                        //  animation could be resampled, morphing interpolation handles sparse keyframes quite well.
                                        //  Simple animation cycles like this look ok with 10-15 frames instead of 100 ;)

                                        for ( var i = 0; i < skin.morphTargetInfluences.length; i++ ) {

                                                skin.morphTargetInfluences[ i ] = 0;

                                        }

                                        skin.morphTargetInfluences[ Math.floor( t * 30 ) ] = 1;

                                        t += delta;

                                }

                                controls.update();
                                render();
                                stats.update();

                        }

                        function render() {

                                var timer = Date.now() * 0.0004;
                                //var timer = 1;
                                //camera.position.x = Math.cos( timer ) * 20;
                                //camera.position.y = 2;
                                //camera.position.z = Math.sin( timer ) * 20;

                                //camera.lookAt( scene.position );

                                particleLight.position.x = Math.sin( timer * 5 ) * 4;
                                particleLight.position.y = Math.cos( timer * 3 ) * 4;
                                particleLight.position.z = Math.cos( timer * 5 ) * 4;
                                
                                particleLight2.position.x = - Math.sin( timer * 5 ) * 4;
                                particleLight2.position.y = -Math.cos( timer * 3 ) * 4;
                                particleLight2.position.z = Math.cos( timer * 5 ) * 4;
                                renderer.render( scene, camera );
                                        
                                dae.position.x = x;
                                dae.position.y = 0;
                                dae.position.z = z;

                        }

                </script>
              <p class="lead">This simple sidebar template has a hint of JavaScript to make the template responsive. It also includes Font Awesome icon fonts.</p>
            </div>
            <div class="col-md-6">
              <p class="well">The template still uses the default Bootstrap rows and columns.</p>
            </div>
            <div class="col-md-6">
              <p class="well">But the full-width layout means that you wont be using containers.</p>
            </div>
            <div class="col-md-4">
              <p class="well">Three Column Example</p>
            </div>
            <div class="col-md-4">
              <p class="well">Three Column Example</p>
            </div>
            <div class="col-md-4">
              <p class="well">You get the idea! Do whatever you want in the page content area!</p>
            </div>
          </div>
        </div>
      </div>
      
    </div>
    
    <!-- JavaScript -->
    <script src="js/jquery-1.10.2.js"></script>
    <script src="js/bootstrap.js"></script>

    <!-- Custom JavaScript for the Menu Toggle -->
    <script>
    $("#menu-toggle").click(function(e) {
        e.preventDefault();
        $("#wrapper").toggleClass("active");
    });
    </script>
  </body>
</html>
